<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        //creates the table header
        var senderHeader = document.createElement("th");
		senderHeader.innerHTML = "Sender";
		senderTable.appendChild(senderHeader);

		var subjectHeader = document.createElement("th");
		subjectHeader.innerHTML = "Subject";
		subjectTable.appendChild(subjectHeader);

		var dateHeader = document.createElement("th");
		dateHeader.innerHTML = "Date";
		dateTable.appendChild(dateHeader);

		
        
        //acesses data from window.geemails
        for (var i = 0; i < window.geemails.length; i++) {
        	
        	//first row
        	var aRow = document.createElement("tr");
        	aRow.className = "rows";
        	main.appendChild(aRow);

        	var senderRow = document.createElement('td');
   			senderRow.className = 'from';
   			senderRow.innerHTML = window.geemails[i].sender;
   			aRow.appendChild(senderRow);

   			var subjectRow = document.createElement('td');
   			subjectRow.className = 'subj';
   			subjectRow.innerHTML = window.geemails[i].subject;
   			aRow.appendChild(subjectRow);

   			var dateRow = document.createElement('td');
   			dateRow.className = 'dater';
   			dateRow.innerHTML = window.geemails[i].date;
   			aRow.appendChild(dateRow);

   			//2nd body message row
   			var msgRow = document.createElement('tr');
   			msgRow.className = "rows2";
   			main.appendChild(msgRow);

   			var bodyRow = document.createElement('td');
   			bodyRow.className = 'msg';
   			bodyRow.innerHTML = window.geemails[i].body;
   			msgRow.appendChild(bodyRow);
   			

        	
        }
         
         //places body message under all columns
         var nodeList = document.getElementsByTagName("td");
         for (var i = 3; i < nodeList.length; i+=4) {
         nodeList[i].colSpan = "3";
     		}	


     	//the click event
    	var personSent = document.getElementsByClassName("rows2")
    	for (var i = 0; i < personSent.length; i++) {
    		personSent[i].addEventListener('click', show, false);
    	}

    	function show() {
    		var showMessage = this.querySelectorAll('.msg')[0];
    		if (showMessage.style.display === "none") {
    			showMessage.style.display = "block";
    		}else {
    			showMessage.style.display = "none";
    		}
    	}
    	//displays full table in the console
    	var x = document.getElementById('all');
    	console.log(x);
      }
    </script>
	</head>
	<body>
		<h1><img src="img/geemail.jpg"></h1>
		
		<div class="container">
			<table id="all">
				<thead>
				<tr>
				    <th id="senderTable"></th> 
				    <th id="subjectTable"></th>
				    <th id="dateTable"></th>
				</tr>
				<tbody id ="main">
				</tbody>
				
			</table>


		</div>
	</body>
</html>